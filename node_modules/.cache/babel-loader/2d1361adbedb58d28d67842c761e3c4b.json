{"ast":null,"code":"import _slicedToArray from\"D:\\\\PM\\\\Project\\\\WhatsApp Clone\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from'react';import'./SidebarChat.css';import db from'../firebase';import{Link}from'react-router-dom';import{Avatar,IconButton}from'@material-ui/core';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SidebarChat(_ref){var _messages$;var id=_ref.id,name=_ref.name,addNewChat=_ref.addNewChat;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];useEffect(function(){if(id){db.collection('rooms').doc(id).collection('messages').orderBy('timestamp','desc').onSnapshot(function(snapshot){setMessages(snapshot.docs.map(function(doc){return doc.data();}));});}},[id]);var createChat=function createChat(){var roomName=prompt(\"Please enter name for Chat room :- \");if(roomName){db.collection('rooms').add({name:roomName});}};return!addNewChat?/*#__PURE__*/_jsx(Link,{to:\"/rooms/\".concat(id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"sidebarChat\",children:[/*#__PURE__*/_jsx(Avatar,{src:\"https://avatars.dicebear.com/api/avataaars/Mouth=['smile']\".concat(Math.random()*5000,\".svg\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebarChat__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsx(\"p\",{children:(_messages$=messages[0])===null||_messages$===void 0?void 0:_messages$.message})]})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"sidebarChat\",onClick:createChat,children:/*#__PURE__*/_jsx(\"h2\",{children:\"Add New Chat\"})});}export default SidebarChat;","map":{"version":3,"sources":["D:/PM/Project/WhatsApp Clone/src/components/SidebarChat.js"],"names":["React","useState","useEffect","db","Link","Avatar","IconButton","SidebarChat","id","name","addNewChat","messages","setMessages","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","createChat","roomName","prompt","add","Math","random","message"],"mappings":"2HAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAO,mBAAP,CAEA,MAAOC,CAAAA,EAAP,KAAe,aAAf,CAEA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,MAAT,CAAiBC,UAAjB,KAAmC,mBAAnC,C,wFAEA,QAASC,CAAAA,WAAT,MAA6C,mBAAvBC,CAAAA,EAAuB,MAAvBA,EAAuB,CAAnBC,IAAmB,MAAnBA,IAAmB,CAAbC,UAAa,MAAbA,UAAa,CACzC,cAAgCT,QAAQ,CAAC,EAAD,CAAxC,wCAAOU,QAAP,eAAiBC,WAAjB,eAEAV,SAAS,CAAC,UAAM,CACZ,GAAGM,EAAH,CAAM,CACFL,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BN,EAA3B,EAA+BK,UAA/B,CAA0C,UAA1C,EAAsDE,OAAtD,CAA8D,WAA9D,CAA0E,MAA1E,EAAkFC,UAAlF,CAA6F,SAAAC,QAAQ,CAAI,CACrGL,WAAW,CAACK,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAASA,CAAAA,GAAG,CAACM,IAAJ,EAAT,EAAlB,CAAD,CAAX,CACH,CAFD,EAGH,CACJ,CANQ,CAMN,CAACZ,EAAD,CANM,CAAT,CAQA,GAAMa,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAMC,CAAAA,QAAQ,CAAGC,MAAM,CAAC,qCAAD,CAAvB,CACA,GAAID,QAAJ,CAAc,CACVnB,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBW,GAAvB,CAA2B,CACvBf,IAAI,CAAEa,QADiB,CAA3B,EAGH,CACJ,CAPD,CASA,MAAQ,CAACZ,UAAF,cACH,KAAC,IAAD,EAAM,EAAE,kBAAYF,EAAZ,CAAR,uBACI,aAAK,SAAS,CAAC,aAAf,wBACI,KAAC,MAAD,EAAQ,GAAG,qEAA+DiB,IAAI,CAACC,MAAL,GAAgB,IAA/E,QAAX,EADJ,cAEI,aAAK,SAAS,CAAC,mBAAf,wBACI,oBAAKjB,IAAL,EADJ,cAEI,+BAAIE,QAAQ,CAAC,CAAD,CAAZ,qCAAI,WAAagB,OAAjB,EAFJ,GAFJ,GADJ,EADG,cAWH,YAAK,SAAS,CAAC,aAAf,CAA6B,OAAO,CAAEN,UAAtC,uBACI,oCADJ,EAXJ,CAeH,CAED,cAAed,CAAAA,WAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport './SidebarChat.css'\n\nimport db from '../firebase';\n\nimport { Link } from 'react-router-dom';\nimport { Avatar, IconButton } from '@material-ui/core';\n\nfunction SidebarChat({id, name, addNewChat}) {\n    const [messages, setMessages] = useState(\"\");\n    \n    useEffect(() => {\n        if(id){\n            db.collection('rooms').doc(id).collection('messages').orderBy('timestamp','desc').onSnapshot(snapshot => {\n                setMessages(snapshot.docs.map((doc) => doc.data()))\n            })\n        }\n    }, [id]);\n\n    const createChat = () => {\n        const roomName = prompt(\"Please enter name for Chat room :- \")\n        if( roomName ){\n            db.collection('rooms').add({\n                name: roomName,\n            })\n        }\n    };\n\n    return (!addNewChat) ? (\n        <Link to={`/rooms/${id}`}>\n            <div className=\"sidebarChat\">\n                <Avatar src={`https://avatars.dicebear.com/api/avataaars/Mouth=['smile']${Math.random() * 5000}.svg`}/>\n                <div className=\"sidebarChat__info\">\n                    <h2>{name}</h2>\n                    <p>{messages[0]?.message}</p>\n                </div>\n            </div>  \n        </Link>\n    ):(\n        <div className=\"sidebarChat\" onClick={createChat}>\n            <h2>Add New Chat</h2>\n        </div>\n    )\n}\n\nexport default SidebarChat\n"]},"metadata":{},"sourceType":"module"}